import n from"react";import e,{css as t,keyframes as r,ThemeProvider as o}from"styled-components";import{Transition as i}from"react-transition-group";import{rgba as a,darken as c}from"polished";function u(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function l(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}function s(n,e,t){return e&&l(n.prototype,e),t&&l(n,t),n}function f(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function p(){return(p=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n}).apply(this,arguments)}function d(n,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),e&&v(n,e)}function h(n){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)})(n)}function v(n,e){return(v=Object.setPrototypeOf||function(n,e){return n.__proto__=e,n})(n,e)}function b(n,e){if(null==n)return{};var t,r,o=function(n,e){if(null==n)return{};var t,r,o={},i=Object.keys(n);for(r=0;r<i.length;r++)t=i[r],e.indexOf(t)>=0||(o[t]=n[t]);return o}(n,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);for(r=0;r<i.length;r++)t=i[r],e.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(n,t)&&(o[t]=n[t])}return o}function m(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function C(n,e){return!e||"object"!=typeof e&&"function"!=typeof e?m(n):e}function y(n,e){return e||(e=n.slice(0)),Object.freeze(Object.defineProperties(n,{raw:{value:Object.freeze(e)}}))}function k(){var n=y(["\n    background: ",";\n\n    &::before,\n    &::after {\n      background: ",";\n    }\n\n    &:hover {\n      &::before,\n      &::after {\n        background: ",";\n      }\n    }\n  "]);return k=function(){return n},n}function g(){var n=y(["\n  border: 0;\n  padding: 0;\n  appearance: none;\n  position: absolute;\n  right: 0;\n  top: calc(50% - 15px);\n  transform: translateX(0);\n  height: 30px;\n  width: 36px;\n  border-radius: 0 9999px 9999px 0;\n  backface-visibility: hidden;\n  cursor: pointer;\n  outline: none;\n  transition: transform .3s cubic-bezier(.25,0,.6,1.4) 1s,-webkit-transform .3s cubic-bezier(.25,0,.6,1.4) 1s;\n\n  &::before,\n  &::after {\n    content: '';\n    position: absolute;\n    right: calc(50% - 3.5px);\n    top: calc(50% - 8px);\n    height: 16px;\n    width: 2px;\n    border-radius: 9999px;\n    transition: background 0.3s ease-in-out;\n  }\n\n  &::before {\n    transform: rotate(45deg);\n  }\n\n  &::after {\n    transform: rotate(-45deg);\n  }\n\n  ","\n"]);return g=function(){return n},n}var x=e.button(g(),(function(n){var e=n.theme,r=(e.primaryColor,e.secondaryColor);return t(k(),a(r,.1),r,c(.1,r))})),w={entered:function(){return{transform:"translateX(calc(100% - 5px))",transitionDelay:"0s"}},exiting:function(n){var e=n.isClicked;return{transitionDuration:e?"0.25s":"0.3s",transitionDelay:e?"0s":"0.7s"}}},O=function(e){var t=e.in,r=b(e,["in"]);return n.createElement(i,{in:t,timeout:{enter:400}},(function(e){return n.createElement(x,p({style:w[e]&&w[e](r)},r))}))};function E(){var n=y(["\n  position: relative;\n  z-index: 2;\n"]);return E=function(){return n},n}function T(){var n=y(["\n  display: inline-block;\n  position: relative;\n  z-index: 1;\n"]);return T=function(){return n},n}var j=e.div(T()),R=e.div(E()),z=function(e){function t(){var n,e;u(this,t);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return f(m(e=C(this,(n=h(t)).call.apply(n,[this].concat(o)))),"state",{displayClear:!1}),f(m(e),"onClick",(function(){e.state.displayClear&&e.setState({displayClear:!1})})),f(m(e),"mouseMove",(function(){e.state.displayClear||e.setState({displayClear:!0})})),f(m(e),"mouseLeave",(function(){e.state.displayClear&&e.setState({displayClear:!1})})),e}return d(t,n.Component),s(t,[{key:"render",value:function(){var e=this,t=this.props,r=t.children,o=t.isClicked,i=t.onClickClear,a=this.state.displayClear;return n.createElement(j,{onMouseLeave:this.mouseLeave,onClick:function(n){e.state.isClicked=!0,setTimeout((function(){e.state.isClicked=!1}),100)}},n.createElement(R,{onMouseMove:this.mouseMove,onClick:this.onClick},r),n.createElement(O,{onClick:i,in:a&&o,isClicked:this.state.isClicked}))}}]),t}();function P(){var n=y(["\n    fill: ",";\n    stroke: ",";\n    stroke-width: ",";\n  "]);return P=function(){return n},n}function S(){var n=y(["\n  width: 33px;\n\n  ",";\n"]);return S=function(){return n},n}var M=e.svg(S(),(function(n){var e=n.isClicked,r=n.theme.secondaryColor;return t(P(),e?r:"none",e?"white":r,e?"1px":"2px")})),_=n.createElement("path",{d:"M-471.2 366.8c1.2 1.1 1.9 2.6 2.3 4.1.4-.3.8-.5 1.2-.7 1-1.9.7-4.3-1-5.9-2-1.9-5.2-1.9-7.2.1l-.2.2c1.8.1 3.6.9 4.9 2.2zm-28.8 14c.4.9.7 1.9.8 3.1l16.5-16.9c.6-.6 1.4-1.1 2.1-1.5 1-1.9.7-4.4-.9-6-2-1.9-5.2-1.9-7.2.1l-15.5 15.9c2.3 2.2 3.1 3 4.2 5.3zm-38.9 39.7c-.1-8.9 3.2-17.2 9.4-23.6l18.6-19c.7-2 .5-4.1-.1-5.3-.8-1.8-1.3-2.3-3.6-4.5l-20.9 21.4c-10.6 10.8-11.2 27.6-2.3 39.3-.6-2.6-1-5.4-1.1-8.3z"}),H=n.createElement("path",{d:"M-527.2 399.1l20.9-21.4c2.2 2.2 2.7 2.6 3.5 4.5.8 1.8 1 5.4-1.6 8l-11.8 12.2c-.5.5-.4 1.2 0 1.7.5.5 1.2.5 1.7 0l34-35c1.9-2 5.2-2.1 7.2-.1 2 1.9 2 5.2.1 7.2l-24.7 25.3c-.5.5-.4 1.2 0 1.7.5.5 1.2.5 1.7 0l28.5-29.3c2-2 5.2-2 7.1-.1 2 1.9 2 5.1.1 7.1l-28.5 29.3c-.5.5-.4 1.2 0 1.7.5.5 1.2.4 1.7 0l24.7-25.3c1.9-2 5.1-2.1 7.1-.1 2 1.9 2 5.2.1 7.2l-24.7 25.3c-.5.5-.4 1.2 0 1.7.5.5 1.2.5 1.7 0l14.6-15c2-2 5.2-2 7.2-.1 2 2 2.1 5.2.1 7.2l-27.6 28.4c-11.6 11.9-30.6 12.2-42.5.6-12-11.7-12.2-30.8-.6-42.7m18.1-48.4l-.7 4.9-2.2-4.4m7.6.9l-3.7 3.4 1.2-4.8m5.5 4.7l-4.8 1.6 3.1-3.9"}),D=n.forwardRef((function(e,t){return n.createElement(M,p({ref:t,xmlns:"http://www.w3.org/2000/svg",viewBox:"-549 338 100.1 125"},e),_,H)}));function L(){var n=y(["\n    width: ","px;\n    height: ","px;\n    border: 1px solid ",";\n\n    &::after {\n      width: ","px;\n      height: ","px;\n      border-color: ",";\n      color: ",";\n      fill: ",";\n    }\n\n    &:hover, &:focus {\n      border: 1px solid ",";\n    }\n  "]);return L=function(){return n},n}function B(){var n=y(["\n    &::after {\n      animation: "," 2s infinite;\n    }\n  "]);return B=function(){return n},n}function I(){var n=y(["\n  position: relative;\n  outline: 1px solid transparent;\n  border-radius: 50%;\n  background: #fff;\n  transition: border 0.1s ease-in;\n\n  &::after {\n    content: '';\n    position: absolute;\n    top: 0;\n    left: 0;\n    display: block;\n    border-radius: 50%;\n  }\n\n  &:hover {\n    cursor: pointer;\n  }\n\n  ","\n\n  ","\n"]);return I=function(){return n},n}function N(){var n=y(["\n0%{\n     box-shadow:0 0\n }\n 70%{\n     box-shadow:0 0 5px 10px rgba(255,255,255,0)\n }\n 100%{\n     box-shadow:0 0 0 0 rgba(255,255,255,0)\n }\n"]);return N=function(){return n},n}var X=function(n){n.theme.secondaryColor;return r(N())},q=e.button(I(),(function(n){return n.isHover&&t(B(),X)}),(function(n){var e=n.theme,r=e.primaryColor,o=e.secondaryColor,i=e.size;return t(L(),i,i,r,i-1,i-1,o,o,o,o)})),A=n.forwardRef((function(e,t){return n.createElement(q,p({ref:t},e))}));function W(){var n=y(["\n  font-size: 0.8rem;\n  user-select: none;\n  pointer-events: none;\n  position: absolute;\n"]);return W=function(){return n},n}var F=t(W());function G(){var n=y(["\n\n      height: ",";\n      width: ",";\n      line-height: ",";\n      top: -",";\n      left: ","px;\n      background: ",";\n    "]);return G=function(){return n},n}function J(){var n=y(["\n  color: white;\n  border-radius: 50%;\n  backface-visibility: hidden;\n  ","\n\n  ","\n"]);return J=function(){return n},n}var K=e.span(J(),F,(function(n){var e=n.theme,r=e.secondaryColor,o=e.size,i="".concat(3*o/4,"px");return t(G(),i,i,i,i,o/8,r)})),Q=n.forwardRef((function(e,t){return n.createElement(K,p({ref:t},e))})),U={primaryColor:"rgb(189, 195, 199)",secondaryColor:"rgb(39, 174, 96)",size:40},V=function(e){function t(e){var r;return u(this,t),(r=C(this,h(t).call(this,e))).state={unclicked:!0,count:r.props.count,countTotal:r.props.countTotal,isClicked:e.count>0,isHover:!1},r.onClick=r.onClick.bind(m(r)),r.onClickClear=r.onClickClear.bind(m(r)),r.clapButtonRef=n.createRef(),r.clapIconRef=n.createRef(),r.clapCountRef=n.createRef(),r}return d(t,n.Component),s(t,[{key:"componentWillReceiveProps",value:function(n){n.count==this.state.count&&n.countTotal==this.state.countTotal||this.setState({countTotal:n.countTotal,count:n.count})}},{key:"componentDidMount",value:function(){require("mo-js")}},{key:"getTheme",value:function(){var n=this.props.theme,e=void 0===n?{}:n;return Object.assign({},U,e)}},{key:"onClick",value:function(){var n=this.props,e=n.maxCount,t=n.onCountChange;this.animationTimeline.replay(),this.setState((function(n){var r=n.count,o=n.countTotal;if(r<e)return t({count:r+1,countTotal:r>0?o:o+1}),{unclicked:!1,count:r+1,countTotal:r>0?o:o+1,isClicked:!0}}))}},{key:"onClickClear",value:function(){var n=this.props.onCountChange;this.setState((function(e){var t=e.count,r=e.countTotal;return n({count:0,countTotal:r-t}),{isClicked:!1,countTotal:r-t,count:0}}))}},{key:"render",value:function(){var e=this,t=this.state,r=t.count,i=(t.countTotal,t.isClicked),a=t.isHover,c=this.props.iconComponent;return n.createElement(o,{theme:this.getTheme()},n.createElement(z,{isClicked:i,onClickClear:this.onClickClear},n.createElement(A,{ref:this.clapButtonRef,className:"clap",onClick:this.onClick,onMouseEnter:function(n){return e.setState({isHover:!0})},onMouseLeave:function(n){return e.setState({isHover:!1})},isHover:a&&0===r},n.createElement(c,{ref:this.clapIconRef,className:"clap--icon",isClicked:i}),n.createElement(Q,{ref:this.clapCountRef,className:"clap--count"},r))))}}]),t}();V.defaultProps={countTotal:0,count:0,maxCount:999,isClicked:!1,onCountChange:function(){},iconComponent:D};export default V;
//# sourceMappingURL=react-clap-button.m.js.map
